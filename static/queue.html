<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plaxt Admin - Queue Monitor</title>
  <link rel="icon" type="image/png" href="/static/img/favicon.png">
  <link rel="stylesheet" href="{{assetPath "css/wizard.css"}}">
  <link rel="stylesheet" href="{{assetPath "css/common.css"}}">
  <link rel="stylesheet" href="{{assetPath "css/queue.css"}}">
</head>
<body>
  <div class="admin-container">
    <div class="admin-header">
      <h1>Queue Monitor</h1>
      <div class="header-actions">
        <span class="last-updated" id="last-updated">Loading...</span>
        <a href="/admin" class="btn btn-back">‚Üê Back to Admin</a>
      </div>
    </div>

    <!-- System Overview -->
    <div class="admin-stats">
      <div class="stat-card">
        <div class="stat-label">Total Users</div>
        <div class="stat-value" id="total-users">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Active Queues</div>
        <div class="stat-value" id="active-queues">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Total Events</div>
        <div class="stat-value" id="total-events">-</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">System Mode</div>
        <div class="stat-value" id="system-mode">-</div>
      </div>
    </div>

    <!-- Per-User Queue Table -->
    <div class="users-table-container">
      <div class="table-header">
        <h2>Queue Status by User</h2>
      </div>
      <table class="users-table">
        <thead>
          <tr>
            <th>User</th>
            <th>Events</th>
            <th>Oldest Event</th>
            <th>Status</th>
            <th>Processed/Failed</th>
          </tr>
        </thead>
        <tbody id="queue-table-body">
          <tr>
            <td colspan="5" class="empty-state">
              <div class="empty-state-icon">‚è≥</div>
              <div>Loading queue status...</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Recent Events Log -->
    <div class="users-table-container">
      <div class="table-header">
        <h2>Recent Queue Events</h2>
      </div>
      <div class="event-log" id="event-log">
        <div class="event-row event-row--header">
          <span>Time</span>
          <span>User</span>
          <span>Operation</span>
          <span>Event ID</span>
          <span>Details</span>
        </div>
        <div id="event-log-rows">
          <div class="empty-state">
            <div class="empty-state-icon">üìã</div>
            <div>Loading recent events...</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="{{assetPath "js/common.js"}}"></script>
  <script src="{{assetPath "js/queue.js"}}"></script>
</body>
</html>
